<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>untitled</title>
	<meta name="generator" content="TextMate http://macromates.com/">
	<meta name="author" content="cla">
	<script src='/js/jquery-1.10.1.min.js' type='text/javascript'></script>
</head>
<body>
<pre id="result">

		<script type='text/javascript'>
function get(variable) /* variable from url */
{
       var query = window.location.search.substring(1);
       var vars = query.split("&");
       for (var i=0;i<vars.length;i++) {
               var pair = vars[i].split("=");
               if(pair[0] == variable){return pair[1];}
       }
       return(false);
}



		var i,j;
		var json=[];
		$.get('http://localhost:8888/json/SEBmisc.logs/SEBmisc.log' + get('date'), function(s) {
//Wed May 29 02:47:24 CEST 2013;INFO;SALJSTOD;AD;multiExMerge;/Applications/A7510/1.0/A7510.xdp;successful pages:3
//Wed May 29 06:41:56 CEST 2013;INFO;SALJSTOD;AD;multiExMerge;/Applications/A7510/1.0/A7510.xdp;successful pages:3
			var lines = s.split("\n");
			for (i=0;i<lines.length;i++) {
				var o = {};
				var line = lines[i].split(";");
				if (line[1] == "INFO") {
					if (line[2] == "SALJSTOD" && line[3] == "AD") {

						// get date
						var timestamp = new Date(line[0].replace(/CEST/, '+0200'));
						var timestamp = new Date(line[0].replace(/CET/, '+0100'));
						
						o.t = timestamp.getTime();
						// formid
						o.f = line[5].split("/")[2];
						// pages
						var temp;
						if (temp = line[6].match(/pages:(\d)/)) {
							o.p = temp[1];
						}
						// channel
						switch(line[4]) {
							case "xml2pdf": o.c = "T"; break;
							case "singleExMergeA7479": o.c = "T"; break;
							case "multiExMerge": o.c = "K"; break;
							case "multiExMergeA7479": o.c = "K"; break;
						}
						json.push(o);

					} else {/*NOT ;SALJSTOD;*/}
				} else {/*;ERROR;*/}
			}
			document.write(JSON.stringify(json));
		});
		</script>
</pre>
</body>
</html>
